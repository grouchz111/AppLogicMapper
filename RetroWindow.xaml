<Window x:Class="ThemeRetro.RetroWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="Retro App"
        Width="900"
        Height="650"
        FontFamily="Tahoma"
        FontSize="14"
        Background="#D4D0C8"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        WindowStyle="None"
        ResizeMode="CanResize"
        AllowsTransparency="False">

    <Window.Resources>
        <Style x:Key="TitleBarButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="60"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Margin" Value="2,8,2,8"/>
            <Setter Property="FontFamily" Value="Tahoma"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="#E6E6E6"/>
            <Setter Property="BorderBrush" Value="#606060"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F0F0F0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#CFCFCF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseButtonStyle" BasedOn="{StaticResource TitleBarButtonStyle}" TargetType="Button">
            <Setter Property="Background" Value="#E06A6A"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                SnapsToDevicePixels="True">
                            <TextBlock Text="✕" FontWeight="Bold" Foreground="White" FontSize="16"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#C94E4E"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#A83A3A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <shell:WindowChrome.WindowChrome>
        <!-- Increase CaptionHeight until the OS caption is covered on your machine -->
        <shell:WindowChrome
            CaptionHeight="72"
            ResizeBorderThickness="10"
            CornerRadius="0"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False" />
    </shell:WindowChrome.WindowChrome>

    <Grid>

        <!-- Title bar (must be <= CaptionHeight; here set to 72 to match) -->
        <Grid VerticalAlignment="Top"
              Height="72"
              Background="#0A4AB8"
              MouseLeftButtonDown="TitleBar_MouseLeftButtonDown"
              shell:WindowChrome.IsHitTestVisibleInChrome="True">
            <!-- Beveled effect -->
            <Border Background="#1A5CD8" Height="72" VerticalAlignment="Top" SnapsToDevicePixels="True">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#6A9FEA" Offset="0"/>
                        <GradientStop Color="#2A66C8" Offset="1"/>
                    </LinearGradientBrush>
                </Border.BorderBrush>
                <Border BorderThickness="0,0,0,3" BorderBrush="#07214A"/>
            </Border>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="220"/>
                </Grid.ColumnDefinitions>

                <!-- Icon placeholder -->
                <Border Grid.Column="0" Width="48" Height="40" Margin="16,16,8,16" Background="#083B8A" BorderBrush="#02224E" BorderThickness="1">
                    <TextBlock Text="☼" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="18"/>
                </Border>

                <!-- Title text centered -->
                <TextBlock Grid.Column="1"
                           Text="{Binding Title, RelativeSource={RelativeSource AncestorType=Window}}"
                           FontWeight="Bold"
                           Foreground="White"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           FontSize="18"
                           TextTrimming="CharacterEllipsis"/>

                <!-- Window buttons (ensure they receive clicks) -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,12,0">
                    <Button Style="{StaticResource TitleBarButtonStyle}" Click="MinimizeButton_Click" Content="—" ToolTip="Minimize"
                            shell:WindowChrome.IsHitTestVisibleInChrome="False"/>
                    <Button Style="{StaticResource TitleBarButtonStyle}" Click="MaximizeRestoreButton_Click" Content="▢" ToolTip="Maximize/Restore"
                            shell:WindowChrome.IsHitTestVisibleInChrome="False"/>
                    <Button Style="{StaticResource CloseButtonStyle}" Click="CloseButton_Click" ToolTip="Close"
                            shell:WindowChrome.IsHitTestVisibleInChrome="False"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- Content trimmed below the custom title bar -->
        <Grid Margin="0,72,0,0">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Border Grid.Row="1"
                    BorderBrush="#0A246A"
                    BorderThickness="3"
                    Background="#D4D0C8"
                    Padding="24">

                <StackPanel Width="320">
                    <Button Content="Start" Margin="0,0,0,8" Padding="12,6"/>
                    <Button Content="Trollge" Margin="0,0,0,8" Padding="12,6"/>
                    <Button Content="XP be like" Margin="0,0,0,16" Padding="12,6"/>
                    <TextBox Margin="0,0,0,16" Padding="6"/>
                    <CheckBox Content="CheckBox" Margin="0,0,0,12"/>
                    <RadioButton Content="RadioButton"/>
                    <RadioButton Content="RadioButton"/>
                </StackPanel>

            </Border>
        </Grid>
    </Grid>
</Window>
